{"version":3,"file":"commonHelpers.js","sources":["../src/img/error-icon.svg","../src/img/close-icon.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__09c89fb5__\"","export default \"__VITE_ASSET__dfffa3db__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nimport errorIcon from './img/error-icon.svg';\nimport closeIcon from './img/close-icon.svg';\n\nconst form = document.querySelector('.search-form');\nconst list = document.querySelector('.images-list');\nconst loader = document.querySelector('.loader');\nconst loadMoreForm = document.querySelector('.load-more-form');\n\nlet page = 1;\nlet per_page = 15;\nlet value = null;\nlet totalResults = 0;\n\nform.addEventListener('submit', onBtnClick);\nloadMoreForm.addEventListener('submit', onLoadMoreClick);\n\nasync function onBtnClick(e) {\n  e.preventDefault();\n  list.innerHTML = '';\n  page = 1;\n  loadMoreForm.classList.add('hidden');\n  value = form.elements.search.value.trim();\n  if (value === '') return;\n  showLoader();\n  try {\n    const res = await getInfo(value);\n    renderMarkup(res);\n    totalResults = res.total;\n    if (res.hits.length !== 0) {\n      loadMoreForm.classList.remove('hidden');\n    }\n  } catch (error) {\n    console.log(error);\n  }\n  hideLoader();\n  endOfCollection();\n  form.reset();\n}\n\nasync function onLoadMoreClick(e) {\n  e.preventDefault();\n  loadMoreForm.classList.add('hidden');\n  page++;\n  showLoader();\n  try {\n    const res = await getInfo(value);\n    renderMarkup(res);\n    if (res.hits.length !== 0) {\n      loadMoreForm.classList.remove('hidden');\n    }\n  } catch (error) {\n    console.log(error);\n  }\n  hideLoader();\n  endOfCollection();\n  const image = document.querySelector('.gallery-image');\n  const { height } = image.getBoundingClientRect();\n  window.scrollBy({\n    top: height * 3.5,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n\nasync function getInfo(value) {\n  const res = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '42394910-99d99ece52e00ce85305c6646',\n      q: value,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page,\n      page,\n    },\n  });\n  return res.data;\n}\n\nfunction renderMarkup({ hits }) {\n  if (hits.length === 0) {\n    showNotification(\n      'Sorry, there are no images matching<br/> your search query. Please try again!'\n    );\n    return;\n  }\n  const markup = hits\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) =>\n        `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\"\n        ><img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"\n      /></a>\n      <div class=\"info-box\">\n        <p>Likes <span>${likes}</span></p>\n        <p>Views <span>${views}</span></p>\n        <p>Comments <span>${comments}</span></p>\n        <p>Downloads <span>${downloads}</span></p>\n      </div>\n    </li>`\n    )\n    .join('');\n  list.insertAdjacentHTML('beforeend', markup);\n  showLightBox();\n}\n\nfunction showNotification(message) {\n  iziToast.show({\n    message,\n    messageColor: '#fff',\n    messageSize: '16',\n    messageLineHeight: '24',\n    backgroundColor: '#ef4040',\n    progressBarColor: '#b51b1b',\n    position: 'topRight',\n    iconUrl: errorIcon,\n    close: false,\n    buttons: [\n      [\n        `<button type=\"submit\" style=\"background-color: inherit\"><img src=\"${closeIcon}\"/></button>`,\n        function (instance, toast) {\n          instance.hide(\n            {\n              transitionOut: 'fadeOut',\n            },\n            toast\n          );\n        },\n      ],\n    ],\n  });\n}\n\nfunction showLightBox() {\n  const lightbox = new simpleLightbox('.images-list a', {\n    captionsData: 'alt',\n    captionsDelay: 250,\n  });\n  lightbox.refresh();\n}\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction endOfCollection() {\n  const pagesQuantity = Math.ceil(totalResults / per_page);\n  if (pagesQuantity === page) {\n    loadMoreForm.classList.add('hidden');\n    showNotification(\n      `We're sorry, but you've reached</br> the end of search results.`\n    );\n  }\n}\n"],"names":["errorIcon","closeIcon","form","list","loader","loadMoreForm","page","per_page","value","totalResults","onBtnClick","onLoadMoreClick","e","showLoader","res","getInfo","renderMarkup","error","hideLoader","endOfCollection","image","height","axios","hits","showNotification","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showLightBox","message","iziToast","instance","toast","simpleLightbox"],"mappings":"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"}